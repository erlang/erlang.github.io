<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/></meta>
<title>/buildroot/otp/lib/kernel/make_test_dir/kernel_test/error_logger_SUITE.erl</title>
</head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
<a name="1"/>    1: <i>%%</i>
<a name="2"/>    2: <i>%% %CopyrightBegin%</i>
<a name="3"/>    3: <i>%%</i>
<a name="4"/>    4: <i>%% Copyright Ericsson AB 1996-2022. All Rights Reserved.</i>
<a name="5"/>    5: <i>%%</i>
<a name="6"/>    6: <i>%% Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</i>
<a name="7"/>    7: <i>%% you may not use this file except in compliance with the License.</i>
<a name="8"/>    8: <i>%% You may obtain a copy of the License at</i>
<a name="9"/>    9: <i>%%</i>
<a name="10"/>   10: <i>%%     http://www.apache.org/licenses/LICENSE-2.0</i>
<a name="11"/>   11: <i>%%</i>
<a name="12"/>   12: <i>%% Unless required by applicable law or agreed to in writing, software</i>
<a name="13"/>   13: <i>%% distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</i>
<a name="14"/>   14: <i>%% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</i>
<a name="15"/>   15: <i>%% See the License for the specific language governing permissions and</i>
<a name="16"/>   16: <i>%% limitations under the License.</i>
<a name="17"/>   17: <i>%%</i>
<a name="18"/>   18: <i>%% %CopyrightEnd%</i>
<a name="19"/>   19: <i>%%</i>
<a name="20"/>   20: <b>-module</b>(error_logger_SUITE).
<a name="21"/>   21: 
<a name="22"/>   22: <b>-include_lib</b>(&quot;common_test/include/ct.hrl&quot;).
<a name="23"/>   23: 
<a name="24"/>   24: <i>%%-----------------------------------------------------------------</i>
<a name="25"/>   25: <i>%% We don't have to test the normal behaviour here, i.e. the tty</i>
<a name="26"/>   26: <i>%% handler.</i>
<a name="27"/>   27: <i>%% We will add an own error handler in order to verify that the</i>
<a name="28"/>   28: <i>%% error_logger deliver the expected events.</i>
<a name="29"/>   29: <i>%%-----------------------------------------------------------------</i>
<a name="30"/>   30: 
<a name="31"/>   31: <b>-export</b>([all/0, suite/0,groups/0,init_per_suite/1, end_per_suite/1, 
<a name="32"/>   32: 	 init_per_group/2,end_per_group/2, 
<a name="33"/>   33:          off_heap/1,
<a name="34"/>   34: 	 error_report/1, info_report/1, error/1, info/1,
<a name="35"/>   35: 	 emulator/1, via_logger_process/1, other_node/1,
<a name="36"/>   36:          tty/1, logfile/1, add/1, delete/1, format_depth/1]).
<a name="37"/>   37: 
<a name="38"/>   38: <b>-export</b>([generate_error/2]).
<a name="39"/>   39: 
<a name="40"/>   40: <b>-export</b>([init/1,
<a name="41"/>   41: 	 handle_event/2, handle_call/2, handle_info/2,
<a name="42"/>   42: 	 terminate/2]).
<a name="43"/>   43: 
<a name="44"/>   44: 
<a name="suite-0"/><a name="45"/>   45: <b>suite</b>() -&gt;
<a name="suite-last_expr"/><a name="46"/>   46:     [{ct_hooks,[ts_install_cth]},
<a name="47"/>   47:      {timetrap,{minutes,1}}].
<a name="48"/>   48: 
<a name="all-0"/><a name="49"/>   49: <b>all</b>() -&gt; 
<a name="all-last_expr"/><a name="50"/>   50:     [off_heap, error_report, info_report, error, info, emulator,
<a name="51"/>   51:      via_logger_process, other_node, tty, logfile, add, delete,
<a name="52"/>   52:      format_depth].
<a name="53"/>   53: 
<a name="groups-0"/><a name="54"/>   54: <b>groups</b>() -&gt; 
<a name="groups-last_expr"/><a name="55"/>   55:     [].
<a name="56"/>   56: 
<a name="init_per_suite-1"/><a name="57"/>   57: <b>init_per_suite</b>(Config) -&gt;
<a name="58"/>   58:     logger:add_handler(error_logger,error_logger,
<a name="59"/>   59:                        #{level=&gt;info,filter_default=&gt;log}),
<a name="init_per_suite-last_expr"/><a name="60"/>   60:     Config.
<a name="61"/>   61: 
<a name="end_per_suite-1"/><a name="62"/>   62: <b>end_per_suite</b>(_Config) -&gt;
<a name="63"/>   63:     logger:remove_handler(error_logger),
<a name="end_per_suite-last_expr"/><a name="64"/>   64:     ok.
<a name="65"/>   65: 
<a name="init_per_group-2"/><a name="66"/>   66: <b>init_per_group</b>(_GroupName, Config) -&gt;
<a name="init_per_group-last_expr"/><a name="67"/>   67:     Config.
<a name="68"/>   68: 
<a name="end_per_group-2"/><a name="69"/>   69: <b>end_per_group</b>(_GroupName, Config) -&gt;
<a name="end_per_group-last_expr"/><a name="70"/>   70:     Config.
<a name="71"/>   71: 
<a name="72"/>   72: 
<a name="73"/>   73: <i>%%-----------------------------------------------------------------</i>
<a name="74"/>   74: 
<a name="off_heap-1"/><a name="75"/>   75: <b>off_heap</b>(_Config) -&gt;
<a name="76"/>   76:     %% The error_logger process may receive a huge amount of
<a name="77"/>   77:     %% messages. Make sure that they are stored off heap to
<a name="78"/>   78:     %% avoid excessive GCs.
<a name="79"/>   79:     MQD = message_queue_data,
<a name="80"/>   80:     {MQD,off_heap} = process_info(whereis(error_logger), MQD),
<a name="off_heap-last_expr"/><a name="81"/>   81:     ok.
<a name="82"/>   82: 
<a name="83"/>   83: <i>%%-----------------------------------------------------------------</i>
<a name="84"/>   84: 
<a name="error_report-1"/><a name="85"/>   85: <b>error_report</b>(Config) when is_list(Config) -&gt;
<a name="86"/>   86:     error_logger:add_report_handler(?MODULE, self()),
<a name="87"/>   87:     Rep1 = [{tag1,&quot;data1&quot;},{tag2,data2},{tag3,3}],
<a name="88"/>   88:     Rep2 = [testing,&quot;testing&quot;,{tag1,&quot;tag1&quot;}],
<a name="89"/>   89:     Rep3 = &quot;This is a string !&quot;,
<a name="90"/>   90:     Rep4 = {this,is,a,tuple},
<a name="91"/>   91:     ok = error_logger:error_report(Rep1),
<a name="92"/>   92:     reported(error_report, std_error, Rep1),
<a name="93"/>   93:     ok = error_logger:error_report(Rep2),
<a name="94"/>   94:     reported(error_report, std_error, Rep2),
<a name="95"/>   95:     ok = error_logger:error_report(Rep3),
<a name="96"/>   96:     reported(error_report, std_error, Rep3),
<a name="97"/>   97:     ok = error_logger:error_report(Rep4),
<a name="98"/>   98:     reported(error_report, std_error, Rep4),
<a name="99"/>   99: 
<a name="100"/>  100:     ok = error_logger:error_report(test_type, Rep1),
<a name="101"/>  101:     reported(error_report, test_type, Rep1),
<a name="102"/>  102:     ok = error_logger:error_report(test_type, Rep2),
<a name="103"/>  103:     reported(error_report, test_type, Rep2),
<a name="104"/>  104:     ok = error_logger:error_report(test_type, Rep3),
<a name="105"/>  105:     reported(error_report, test_type, Rep3),
<a name="106"/>  106:     ok = error_logger:error_report(test_type, Rep4),
<a name="107"/>  107:     reported(error_report, test_type, Rep4),
<a name="108"/>  108: 
<a name="109"/>  109:     ok = error_logger:error_report(&quot;test_type&quot;, Rep1),
<a name="110"/>  110:     reported(error_report, &quot;test_type&quot;, Rep1),
<a name="111"/>  111:     ok = error_logger:error_report({test,type}, Rep2),
<a name="112"/>  112:     reported(error_report, {test,type}, Rep2),
<a name="113"/>  113:     ok = error_logger:error_report([test,type], Rep3),
<a name="114"/>  114:     reported(error_report, [test,type], Rep3),
<a name="115"/>  115:     ok = error_logger:error_report(1, Rep4),
<a name="116"/>  116:     reported(error_report, 1, Rep4),
<a name="117"/>  117: 
<a name="118"/>  118:     my_yes = error_logger:delete_report_handler(?MODULE),
<a name="error_report-last_expr"/><a name="119"/>  119:     ok.
<a name="120"/>  120: 
<a name="121"/>  121: <i>%%-----------------------------------------------------------------</i>
<a name="122"/>  122: 
<a name="info_report-1"/><a name="123"/>  123: <b>info_report</b>(Config) when is_list(Config) -&gt;
<a name="124"/>  124:     error_logger:add_report_handler(?MODULE, self()),
<a name="125"/>  125:     Rep1 = [{tag1,&quot;data1&quot;},{tag2,data2},{tag3,3}],
<a name="126"/>  126:     Rep2 = [testing,&quot;testing&quot;,{tag1,&quot;tag1&quot;}],
<a name="127"/>  127:     Rep3 = &quot;This is a string !&quot;,
<a name="128"/>  128:     Rep4 = {this,is,a,tuple},
<a name="129"/>  129:     ok = error_logger:info_report(Rep1),
<a name="130"/>  130:     reported(info_report, std_info, Rep1),
<a name="131"/>  131:     ok = error_logger:info_report(Rep2),
<a name="132"/>  132:     reported(info_report, std_info, Rep2),
<a name="133"/>  133:     ok = error_logger:info_report(Rep3),
<a name="134"/>  134:     reported(info_report, std_info, Rep3),
<a name="135"/>  135:     ok = error_logger:info_report(Rep4),
<a name="136"/>  136:     reported(info_report, std_info, Rep4),
<a name="137"/>  137: 
<a name="138"/>  138:     ok = error_logger:info_report(test_type, Rep1),
<a name="139"/>  139:     reported(info_report, test_type, Rep1),
<a name="140"/>  140:     ok = error_logger:info_report(test_type, Rep2),
<a name="141"/>  141:     reported(info_report, test_type, Rep2),
<a name="142"/>  142:     ok = error_logger:info_report(test_type, Rep3),
<a name="143"/>  143:     reported(info_report, test_type, Rep3),
<a name="144"/>  144:     ok = error_logger:info_report(test_type, Rep4),
<a name="145"/>  145:     reported(info_report, test_type, Rep4),
<a name="146"/>  146: 
<a name="147"/>  147:     ok = error_logger:info_report(&quot;test_type&quot;, Rep1),
<a name="148"/>  148:     reported(info_report, &quot;test_type&quot;, Rep1),
<a name="149"/>  149:     ok = error_logger:info_report({test,type}, Rep2),
<a name="150"/>  150:     reported(info_report, {test,type}, Rep2),
<a name="151"/>  151:     ok = error_logger:info_report([test,type], Rep3),
<a name="152"/>  152:     reported(info_report, [test,type], Rep3),
<a name="153"/>  153:     ok = error_logger:info_report(1, Rep4),
<a name="154"/>  154:     reported(info_report, 1, Rep4),
<a name="155"/>  155: 
<a name="156"/>  156:     my_yes = error_logger:delete_report_handler(?MODULE),
<a name="info_report-last_expr"/><a name="157"/>  157:     ok.
<a name="158"/>  158: 
<a name="159"/>  159: <i>%%-----------------------------------------------------------------</i>
<a name="160"/>  160: 
<a name="error-1"/><a name="161"/>  161: <b>error</b>(Config) when is_list(Config) -&gt;
<a name="162"/>  162:     error_logger:add_report_handler(?MODULE, self()),
<a name="163"/>  163:     Msg1 = &quot;This is a plain text string~n&quot;,
<a name="164"/>  164:     Msg2 = &quot;This is a text with arguments ~p~n&quot;,
<a name="165"/>  165:     Arg2 = &quot;This is the argument&quot;,
<a name="166"/>  166:     Msg3 = {erroneous,msg},
<a name="167"/>  167: 
<a name="168"/>  168:     ok = error_logger:error_msg(Msg1),
<a name="169"/>  169:     reported(error, Msg1, []),
<a name="170"/>  170:     ok = error_logger:error_msg(Msg2, Arg2),
<a name="171"/>  171:     reported(error, Msg2, Arg2),
<a name="172"/>  172:     ok = error_logger:error_msg(Msg3),
<a name="173"/>  173:     reported(error, Msg3, []),
<a name="174"/>  174: 
<a name="175"/>  175:     ok = error_logger:error_msg(Msg1, []),
<a name="176"/>  176:     reported(error, Msg1, []),
<a name="177"/>  177:     ok = error_logger:error_msg(Msg2, Arg2),
<a name="178"/>  178:     reported(error, Msg2, Arg2),
<a name="179"/>  179:     ok = error_logger:error_msg(Msg3, []),
<a name="180"/>  180:     reported(error, Msg3, []),
<a name="181"/>  181: 
<a name="182"/>  182:     ok = error_logger:format(Msg1, []),
<a name="183"/>  183:     reported(error, Msg1, []),
<a name="184"/>  184:     ok = error_logger:format(Msg2, Arg2),
<a name="185"/>  185:     reported(error, Msg2, Arg2),
<a name="186"/>  186:     ok = error_logger:format(Msg3, []),
<a name="187"/>  187:     reported(error, Msg3, []),
<a name="188"/>  188: 
<a name="189"/>  189:     my_yes = error_logger:delete_report_handler(?MODULE),
<a name="error-last_expr"/><a name="190"/>  190:     ok.
<a name="191"/>  191: 
<a name="192"/>  192: <i>%%-----------------------------------------------------------------</i>
<a name="193"/>  193: 
<a name="info-1"/><a name="194"/>  194: <b>info</b>(Config) when is_list(Config) -&gt;
<a name="195"/>  195:     error_logger:add_report_handler(?MODULE, self()),
<a name="196"/>  196:     Msg1 = &quot;This is a plain text string~n&quot;,
<a name="197"/>  197:     Msg2 = &quot;This is a text with arguments ~p~n&quot;,
<a name="198"/>  198:     Arg2 = &quot;This is the argument&quot;,
<a name="199"/>  199:     Msg3 = {erroneous,msg},
<a name="200"/>  200: 
<a name="201"/>  201:     ok = error_logger:info_msg(Msg1),
<a name="202"/>  202:     reported(info_msg, Msg1, []),
<a name="203"/>  203:     ok = error_logger:info_msg(Msg2, Arg2),
<a name="204"/>  204:     reported(info_msg, Msg2, Arg2),
<a name="205"/>  205:     ok = error_logger:info_msg(Msg3),
<a name="206"/>  206:     reported(info_msg, Msg3, []),
<a name="207"/>  207: 
<a name="208"/>  208:     ok = error_logger:info_msg(Msg1, []),
<a name="209"/>  209:     reported(info_msg, Msg1, []),
<a name="210"/>  210:     ok = error_logger:info_msg(Msg2, Arg2),
<a name="211"/>  211:     reported(info_msg, Msg2, Arg2),
<a name="212"/>  212:     ok = error_logger:info_msg(Msg3, []),
<a name="213"/>  213:     reported(info_msg, Msg3, []),
<a name="214"/>  214: 
<a name="215"/>  215:     my_yes = error_logger:delete_report_handler(?MODULE),
<a name="info-last_expr"/><a name="216"/>  216:     ok.
<a name="217"/>  217: 
<a name="218"/>  218: <i>%%-----------------------------------------------------------------</i>
<a name="219"/>  219: 
<a name="emulator-1"/><a name="220"/>  220: <b>emulator</b>(Config) when is_list(Config) -&gt;
<a name="221"/>  221:     error_logger:add_report_handler(?MODULE, self()),
<a name="222"/>  222:     Msg = &quot;Error in process ~p on node ~p with exit value:~n~p~n&quot;,
<a name="223"/>  223:     Error = {badmatch,4},
<a name="224"/>  224:     Stack = [{module, function, 2, []}],
<a name="225"/>  225:     Pid = spawn(?MODULE, generate_error, [Error, Stack]),
<a name="226"/>  226:     reported(error, Msg, [Pid, node(), {Error, Stack}]),
<a name="227"/>  227:     my_yes = error_logger:delete_report_handler(?MODULE),
<a name="emulator-last_expr"/><a name="228"/>  228:     ok.
<a name="229"/>  229: 
<a name="generate_error-2"/><a name="230"/>  230: <b>generate_error</b>(Error, Stack) -&gt;
<a name="generate_error-last_expr"/><a name="231"/>  231: <b>    erlang:raise</b>(error, Error, Stack).
<a name="232"/>  232: 
<a name="233"/>  233: <i>%%-----------------------------------------------------------------</i>
<a name="234"/>  234: 
<a name="via_logger_process-1"/><a name="235"/>  235: <b>via_logger_process</b>(Config) -&gt;
<a name="via_logger_process-last_expr"/><a name="236"/>  236: <b>    case os:type</b>() of
<a name="237"/>  237:         {win32,_} -&gt;
<a name="238"/>  238:             {skip,&quot;Skip on windows - can't change file mode&quot;};
<a name="239"/>  239:         _ -&gt;
<a name="240"/>  240:             error_logger:add_report_handler(?MODULE, self()),
<a name="241"/>  241:             Dir = filename:join(?config(priv_dir,Config),&quot;dummydir&quot;),
<a name="242"/>  242:             Msg = &quot;File operation error: eacces. Target: &quot; ++
<a name="243"/>  243:                 Dir ++ &quot;. Function: list_dir. &quot;,
<a name="244"/>  244:             ok = file:make_dir(Dir),
<a name="245"/>  245:             ok = file:change_mode(Dir,8#0222),
<a name="246"/>  246:             error = erl_prim_loader:list_dir(Dir),
<a name="247"/>  247:             ok = file:change_mode(Dir,8#0664),
<a name="248"/>  248:             _ = file:del_dir(Dir),
<a name="249"/>  249:             reported(error_report, std_error, Msg),
<a name="250"/>  250:             my_yes = error_logger:delete_report_handler(?MODULE),
<a name="251"/>  251:             ok
<a name="252"/>  252:     end.
<a name="253"/>  253: 
<a name="254"/>  254: <i>%%-----------------------------------------------------------------</i>
<a name="255"/>  255: 
<a name="other_node-1"/><a name="256"/>  256: <b>other_node</b>(_Config) -&gt;
<a name="257"/>  257:     error_logger:add_report_handler(?MODULE, self()),
<a name="258"/>  258:     {ok,Peer,Node} = ?CT_PEER(),
<a name="259"/>  259:     ok = rpc:call(Node,logger,add_handler,[error_logger,error_logger,
<a name="260"/>  260:                                            #{level=&gt;info,filter_default=&gt;log}]),
<a name="261"/>  261:     rpc:call(Node,error_logger,error_report,[hi_from_remote]),
<a name="262"/>  262:     reported(error_report,std_error,hi_from_remote),
<a name="263"/>  263:     peer:stop(Peer),
<a name="other_node-last_expr"/><a name="264"/>  264:     ok.
<a name="265"/>  265: 
<a name="266"/>  266: 
<a name="267"/>  267: <i>%%-----------------------------------------------------------------</i>
<a name="268"/>  268: <i>%% We don't enables or disables tty error logging here. We do not</i>
<a name="269"/>  269: <i>%% want to interact with the test run.</i>
<a name="270"/>  270: <i>%%-----------------------------------------------------------------</i>
<a name="271"/>  271: 
<a name="tty-1"/><a name="272"/>  272: <b>tty</b>(Config) when is_list(Config) -&gt;
<a name="273"/>  273:     {'EXIT', _Reason} = (catch error_logger:tty(dummy)),
<a name="tty-last_expr"/><a name="274"/>  274:     ok.
<a name="275"/>  275: 
<a name="276"/>  276: <i>%%-----------------------------------------------------------------</i>
<a name="277"/>  277: <i>%% If where already exists a logfile we skip this test case !!</i>
<a name="278"/>  278: <i>%%-----------------------------------------------------------------</i>
<a name="279"/>  279: 
<a name="logfile-1"/><a name="280"/>  280: <b>logfile</b>(Config) when is_list(Config) -&gt;
<a name="logfile-last_expr"/><a name="281"/>  281: <b>    case error_logger:logfile</b>(filename) of
<a name="282"/>  282: 	{error, no_log_file} -&gt; % Ok, we continues.
<a name="283"/>  283: 	    do_logfile();
<a name="284"/>  284: 	_ -&gt;
<a name="285"/>  285: 	    ok
<a name="286"/>  286:     end.
<a name="287"/>  287: 
<a name="do_logfile-0"/><a name="288"/>  288: <b>do_logfile</b>() -&gt;
<a name="289"/>  289:     {error, _} = error_logger:logfile(close),
<a name="290"/>  290:     {error, _} = error_logger:logfile({open,{error}}),
<a name="291"/>  291:     ok = error_logger:logfile({open, &quot;dummy_logfile.log&quot;}),
<a name="292"/>  292:     &quot;dummy_logfile.log&quot; = error_logger:logfile(filename),
<a name="293"/>  293:     ok = error_logger:logfile(close),
<a name="294"/>  294:     {'EXIT',_} = (catch error_logger:logfile(dummy)),
<a name="do_logfile-last_expr"/><a name="295"/>  295:     ok.
<a name="296"/>  296: 
<a name="297"/>  297: <i>%%-----------------------------------------------------------------</i>
<a name="298"/>  298: 
<a name="add-1"/><a name="299"/>  299: <b>add</b>(Config) when is_list(Config) -&gt;
<a name="300"/>  300:     {'EXIT',_} = (catch error_logger:add_report_handler(&quot;dummy&quot;)),
<a name="301"/>  301:     {'EXIT',_} = error_logger:add_report_handler(non_existing),
<a name="302"/>  302:     my_error = error_logger:add_report_handler(?MODULE, [error]),
<a name="add-last_expr"/><a name="303"/>  303:     ok.
<a name="304"/>  304: 
<a name="305"/>  305: <i>%%-----------------------------------------------------------------</i>
<a name="306"/>  306: 
<a name="delete-1"/><a name="307"/>  307: <b>delete</b>(Config) when is_list(Config) -&gt;
<a name="308"/>  308:     {'EXIT',_} = (catch error_logger:delete_report_handler(&quot;dummy&quot;)),
<a name="309"/>  309:     {error,_} = error_logger:delete_report_handler(non_existing),
<a name="delete-last_expr"/><a name="310"/>  310:     ok.
<a name="311"/>  311: 
<a name="312"/>  312: <i>%%-----------------------------------------------------------------</i>
<a name="313"/>  313: 
<a name="format_depth-1"/><a name="314"/>  314: <b>format_depth</b>(_Config) -&gt;
<a name="315"/>  315:     ok = application:set_env(kernel,error_logger_format_depth,30),
<a name="316"/>  316:     30 = error_logger:get_format_depth(),
<a name="317"/>  317:     ok = application:set_env(kernel,error_logger_format_depth,3),
<a name="318"/>  318:     10 = error_logger:get_format_depth(),
<a name="319"/>  319:     ok = application:set_env(kernel,error_logger_format_depth,11),
<a name="320"/>  320:     11 = error_logger:get_format_depth(),
<a name="321"/>  321:     ok = application:set_env(kernel,error_logger_format_depth,unlimited),
<a name="322"/>  322:     unlimited = error_logger:get_format_depth(),
<a name="323"/>  323:     ok = application:unset_env(kernel,error_logger_format_depth),
<a name="324"/>  324:     unlimited = error_logger:get_format_depth(),
<a name="format_depth-last_expr"/><a name="325"/>  325:     ok.
<a name="326"/>  326: 
<a name="327"/>  327: <i>%%-----------------------------------------------------------------</i>
<a name="328"/>  328: <i>%% Check that the report has been received.</i>
<a name="329"/>  329: <i>%%-----------------------------------------------------------------</i>
<a name="reported-3"/><a name="330"/>  330: <b>reported</b>(Tag, Type, Report) -&gt;
<a name="reported-last_expr"/><a name="331"/>  331:     receive
<a name="332"/>  332: 	{Tag, Type, Report} -&gt;
<a name="333"/>  333: 	    test_server:messages_get(),
<a name="334"/>  334: 	    ok
<a name="335"/>  335:     after 1000 -&gt;
<a name="336"/>  336: 	    ct:fail({no_report_received,test_server:messages_get()})
<a name="337"/>  337:     end.
<a name="338"/>  338: 
<a name="339"/>  339: <i>%%-----------------------------------------------------------------</i>
<a name="340"/>  340: <i>%% The error_logger handler (gen_event behaviour).</i>
<a name="341"/>  341: <i>%% Sends a notification to the Tester process about the events</i>
<a name="342"/>  342: <i>%% generated by the Tester process.</i>
<a name="343"/>  343: <i>%%-----------------------------------------------------------------</i>
<a name="init-1"/><a name="344"/>  344: <b>init</b>(Tester) when is_pid(Tester) -&gt;
<a name="345"/>  345:     {ok, Tester};
<a name="346"/>  346: <b>init</b>(Config) when is_list(Config) -&gt;
<a name="init-last_expr"/><a name="347"/>  347:     my_error.
<a name="348"/>  348: 
<a name="handle_event-2"/><a name="349"/>  349: <b>handle_event</b>({Tag, _GL, {_EPid, Type, Report}}, Tester) -&gt;
<a name="350"/>  350:     Tester ! {Tag, Type, Report},
<a name="351"/>  351:     {ok, Tester};
<a name="352"/>  352: <b>handle_event</b>(_Event, Tester) -&gt;
<a name="handle_event-last_expr"/><a name="353"/>  353:     {ok, Tester}.
<a name="354"/>  354: 
<a name="handle_info-2"/><a name="355"/>  355: <b>handle_info</b>({emulator, _GL, String}, Tester) -&gt;
<a name="356"/>  356:     Tester ! {emulator, String},
<a name="357"/>  357:     {ok, Tester};
<a name="358"/>  358: <b>handle_info</b>(_, Tester) -&gt;
<a name="handle_info-last_expr"/><a name="359"/>  359:     {ok, Tester}.
<a name="360"/>  360: 
<a name="handle_call-2"/><a name="handle_call-last_expr"/><a name="361"/>  361: <b>handle_call</b>(_Query, Tester) -&gt; {ok, {error, bad_query}, Tester}.
<a name="362"/>  362: 
<a name="terminate-2"/><a name="363"/>  363: <b>terminate</b>(_Reason, _Tester) -&gt;
<a name="terminate-last_expr"/><a name="364"/>  364:     my_yes.
</pre>
<script>
var hash = window.location.hash.substring(1);
var anchor = document.getElementsByName(hash);
anchor[0].style.backgroundColor="orange";
</script>
</body>
</html>
