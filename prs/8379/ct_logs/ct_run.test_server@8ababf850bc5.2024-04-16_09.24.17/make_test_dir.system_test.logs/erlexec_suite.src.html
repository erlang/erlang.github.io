<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!-- autogenerated by 'erl2html2'. -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/></meta>
<title>/buildroot/otp/erts/make_test_dir/system_test/erlexec_SUITE.erl</title>
</head>

<body bgcolor="white" text="black" link="blue" vlink="purple" alink="red">
<pre>
<a name="1"/>    1: <i>%%</i>
<a name="2"/>    2: <i>%% %CopyrightBegin%</i>
<a name="3"/>    3: <i>%%</i>
<a name="4"/>    4: <i>%% Copyright Ericsson AB 2007-2022. All Rights Reserved.</i>
<a name="5"/>    5: <i>%%</i>
<a name="6"/>    6: <i>%% Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</i>
<a name="7"/>    7: <i>%% you may not use this file except in compliance with the License.</i>
<a name="8"/>    8: <i>%% You may obtain a copy of the License at</i>
<a name="9"/>    9: <i>%%</i>
<a name="10"/>   10: <i>%%     http://www.apache.org/licenses/LICENSE-2.0</i>
<a name="11"/>   11: <i>%%</i>
<a name="12"/>   12: <i>%% Unless required by applicable law or agreed to in writing, software</i>
<a name="13"/>   13: <i>%% distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</i>
<a name="14"/>   14: <i>%% WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</i>
<a name="15"/>   15: <i>%% See the License for the specific language governing permissions and</i>
<a name="16"/>   16: <i>%% limitations under the License.</i>
<a name="17"/>   17: <i>%%</i>
<a name="18"/>   18: <i>%% %CopyrightEnd%</i>
<a name="19"/>   19: <i>%%</i>
<a name="20"/>   20: 
<a name="21"/>   21: <i>%%%-------------------------------------------------------------------</i>
<a name="22"/>   22: <i>%%% File    : erlexec_SUITE.erl</i>
<a name="23"/>   23: <i>%%% Author  : Rickard Green &lt;rickard.s.green@ericsson.com&gt;</i>
<a name="24"/>   24: <i>%%% Description : Test erlexec's command line parsing</i>
<a name="25"/>   25: <i>%%%</i>
<a name="26"/>   26: <i>%%% Created : 22 May 2007 by Rickard Green &lt;rickard.s.green@ericsson.com&gt;</i>
<a name="27"/>   27: <i>%%%-------------------------------------------------------------------</i>
<a name="28"/>   28: <b>-module</b>(erlexec_SUITE).
<a name="29"/>   29: 
<a name="30"/>   30: <b>-export</b>([all/0, suite/0, init_per_suite/1, end_per_suite/1,
<a name="31"/>   31:          init_per_testcase/2, end_per_testcase/2]).
<a name="32"/>   32: 
<a name="33"/>   33: <b>-export</b>([args_file/1, evil_args_file/1, missing_args_file/1, env/1, args_file_env/1,
<a name="34"/>   34:          otp_7461/1, otp_7461_remote/1, argument_separation/1, argument_with_option/1,
<a name="35"/>   35:          zdbbl_dist_buf_busy_limit/1]).
<a name="36"/>   36: 
<a name="37"/>   37: <b>-include_lib</b>(&quot;common_test/include/ct.hrl&quot;).
<a name="38"/>   38: 
<a name="suite-0"/><a name="39"/>   39: <b>suite</b>() -&gt;
<a name="suite-last_expr"/><a name="40"/>   40:     [{ct_hooks,[ts_install_cth]},
<a name="41"/>   41:      {timetrap, {minutes, 1}}].
<a name="42"/>   42: 
<a name="all-0"/><a name="43"/>   43: <b>all</b>() -&gt; 
<a name="all-last_expr"/><a name="44"/>   44:     [args_file, evil_args_file, missing_args_file, env, args_file_env,
<a name="45"/>   45:      otp_7461, argument_separation, argument_with_option, zdbbl_dist_buf_busy_limit].
<a name="46"/>   46: 
<a name="init_per_suite-1"/><a name="47"/>   47: <b>init_per_suite</b>(Config) -&gt;
<a name="init_per_suite-last_expr"/><a name="48"/>   48: <b>    [{suite_erl_flags, save_env</b>()} | Config].
<a name="49"/>   49: 
<a name="end_per_suite-1"/><a name="50"/>   50: <b>end_per_suite</b>(Config) -&gt;
<a name="51"/>   51:     SavedEnv = proplists:get_value(suite_erl_flags, Config),
<a name="end_per_suite-last_expr"/><a name="52"/>   52: <b>    restore_env</b>(SavedEnv).
<a name="53"/>   53: 
<a name="init_per_testcase-2"/><a name="54"/>   54: <b>init_per_testcase</b>(Case, Config) -&gt;
<a name="55"/>   55:     SavedEnv = save_env(),
<a name="init_per_testcase-last_expr"/><a name="56"/>   56:     [{testcase, Case},{erl_flags_env, SavedEnv}|Config].
<a name="57"/>   57: 
<a name="end_per_testcase-2"/><a name="58"/>   58: <b>end_per_testcase</b>(_Case, Config) -&gt;
<a name="59"/>   59:     SavedEnv = proplists:get_value(erl_flags_env, Config),
<a name="60"/>   60:     restore_env(SavedEnv),
<a name="61"/>   61:     cleanup_nodes(),
<a name="end_per_testcase-last_expr"/><a name="62"/>   62:     ok.
<a name="63"/>   63: 
<a name="64"/>   64: <i>%% Test that plain first argument does not</i>
<a name="65"/>   65: <i>%% destroy -home switch [OTP-8209] or interact with environments</i>
<a name="argument_separation-1"/><a name="66"/>   66: <b>argument_separation</b>(Config) when is_list(Config) -&gt;
<a name="67"/>   67:     {ok,[[FullPName]]} = init:get_argument(progname),
<a name="68"/>   68:      %% progname can be either &quot;erl&quot; or &quot;cerl -asan&quot;, so we remove anything after the first space.
<a name="69"/>   69:      %% This will break if tests are run with an erlang that has a space in the path...
<a name="70"/>   70:     [PName | _ ] = string:lexemes(FullPName,&quot; &quot;),
<a name="71"/>   71:     SNameS = &quot;erlexec_test_01&quot;,
<a name="72"/>   72:     SName = list_to_atom(SNameS++&quot;@&quot;++
<a name="73"/>   73: 			 hd(tl(string:lexemes(atom_to_list(node()),&quot;@&quot;)))),
<a name="74"/>   74:     Cmd = PName ++ &quot; cmd_param -sname &quot;++SNameS++&quot; -setcookie &quot;++
<a name="75"/>   75: 	atom_to_list(erlang:get_cookie()) ++ &quot; -cmd_test&quot;,
<a name="76"/>   76:     open_port({spawn,Cmd},[{env,[{&quot;ERL_AFLAGS&quot;,&quot;-atest&quot;},
<a name="77"/>   77:                                  {&quot;ERL_FLAGS&quot;,&quot;env_param -test&quot;},
<a name="78"/>   78:                                  {&quot;ERL_ZFLAGS&quot;,&quot;zenv_param&quot;}]}]),
<a name="79"/>   79:     pong = loop_ping(SName,40),
<a name="80"/>   80:     ct:log(&quot;emu_args: ~p&quot;,[rpc:call(SName,erlang,system_info,[emu_args])]),
<a name="81"/>   81:     {ok,[[_]]} = rpc:call(SName,init,get_argument,[home]),
<a name="82"/>   82:     {ok,[[]]} = rpc:call(SName,init,get_argument,[atest]),
<a name="83"/>   83:     {ok,[[]]} = rpc:call(SName,init,get_argument,[cmd_test]),
<a name="84"/>   84:     {ok,[[]]} = rpc:call(SName,init,get_argument,[test]),
<a name="85"/>   85:     error = rpc:call(SName,init,get_argument,[unknown]),
<a name="86"/>   86:     [&quot;cmd_param&quot;,&quot;env_param&quot;,&quot;zenv_param&quot;] = rpc:call(SName,init,get_plain_arguments,[]),
<a name="87"/>   87:     ok = cleanup_nodes(),
<a name="argument_separation-last_expr"/><a name="88"/>   88:     ok.
<a name="89"/>   89: 
<a name="cleanup_nodes-0"/><a name="90"/>   90: <b>cleanup_nodes</b>() -&gt;
<a name="cleanup_nodes-last_expr"/><a name="91"/>   91: <b>    cleanup_node</b>(&quot;erlexec_test_01&quot;,20).
<a name="cleanup_node-2"/><a name="92"/>   92: <b>cleanup_node</b>(SNameS,0) -&gt;
<a name="93"/>   93:     {error, {would_not_die,list_to_atom(SNameS)}};
<a name="94"/>   94: <b>cleanup_node</b>(SNameS,N) -&gt;
<a name="95"/>   95:     SName = list_to_atom(SNameS++&quot;@&quot;++
<a name="96"/>   96: 			 hd(tl(string:lexemes(atom_to_list(node()),&quot;@&quot;)))),
<a name="cleanup_node-last_expr"/><a name="97"/>   97: <b>    case rpc:call</b>(SName,init,stop,[]) of
<a name="98"/>   98: 	{badrpc,_} -&gt;
<a name="99"/>   99: 	    ok;
<a name="100"/>  100: 	ok -&gt;
<a name="101"/>  101: 	    receive after 500 -&gt; ok end,
<a name="102"/>  102: 	    cleanup_node(SNameS,N-1)
<a name="103"/>  103:     end.
<a name="104"/>  104: 
<a name="loop_ping-2"/><a name="105"/>  105: <b>loop_ping</b>(_,0) -&gt;
<a name="106"/>  106:     flush(),
<a name="107"/>  107:     pang;
<a name="108"/>  108: <b>loop_ping</b>(Node,N) -&gt;
<a name="loop_ping-last_expr"/><a name="109"/>  109: <b>    case net_adm:ping</b>(Node) of
<a name="110"/>  110: 	pang -&gt;
<a name="111"/>  111: 	    receive 
<a name="112"/>  112: 	    after 500 -&gt;
<a name="113"/>  113: 		    ok 
<a name="114"/>  114: 	    end,
<a name="115"/>  115: 	    loop_ping(Node, N-1);
<a name="116"/>  116: 	pong -&gt;
<a name="117"/>  117: 	    pong
<a name="118"/>  118:     end.
<a name="119"/>  119: 
<a name="flush-0"/><a name="120"/>  120: <b>flush</b>() -&gt;
<a name="flush-last_expr"/><a name="121"/>  121:     receive M -&gt;
<a name="122"/>  122:             ct:pal(&quot;~p&quot;,[M]),
<a name="123"/>  123:             flush()
<a name="124"/>  124:     after 10 -&gt;
<a name="125"/>  125:             ok
<a name="126"/>  126:     end.
<a name="127"/>  127: 
<a name="128"/>  128: <i>%% Test that giving an invalid argument to an option that needs</i>
<a name="129"/>  129: <i>%% an argument will always fail.</i>
<a name="argument_with_option-1"/><a name="130"/>  130: <b>argument_with_option</b>(Config) when is_list(Config) -&gt;
<a name="131"/>  131:     ErlSingle = [&quot;emu_flavor&quot;, &quot;emu_type&quot;, &quot;configfd&quot;, &quot;epmd&quot;,
<a name="132"/>  132:                  &quot;name&quot;, &quot;sname&quot;, &quot;start_epmd&quot;] ++
<a name="133"/>  133:         case os:type() of
<a name="134"/>  134:             {win32,_} -&gt; [&quot;boot&quot;,&quot;config&quot;,&quot;service_event&quot;];
<a name="135"/>  135:             _ -&gt; []
<a name="136"/>  136:         end,
<a name="137"/>  137: 
<a name="138"/>  138:     MissingCheck =
<a name="139"/>  139:         fun(CmdLine, Prefix, Postfix) -&gt;
<a name="140"/>  140:                 InvalidArg = emu_args(&quot;-s init stop &quot; ++ Prefix ++ CmdLine ++ Postfix,
<a name="141"/>  141:                                       [return_output]),
<a name="142"/>  142:                 case re:run(InvalidArg, &quot;Missing argument\\(s\\) for '\\&quot; ++ Prefix ++ CmdLine ++ &quot;'.&quot;) of
<a name="143"/>  143:                     nomatch -&gt;
<a name="144"/>  144:                         ct:log(&quot;Output: ~ts&quot;,[InvalidArg]),
<a name="145"/>  145:                         ct:fail(&quot;Failed to fail on ~ts&quot;,[Prefix ++ CmdLine ++ Postfix]);
<a name="146"/>  146:                     {match,_} -&gt;
<a name="147"/>  147:                         ok
<a name="148"/>  148:                 end
<a name="149"/>  149:         end,
<a name="150"/>  150:     
<a name="151"/>  151:     [begin
<a name="152"/>  152:          MissingCheck(CmdLine,&quot;-&quot;,&quot;&quot;),
<a name="153"/>  153: 
<a name="154"/>  154:          %% We test what happens when ERL_FLAGS is set
<a name="155"/>  155:          os:putenv(&quot;ERL_FLAGS&quot;,&quot;-test&quot;),
<a name="156"/>  156:          MissingCheck(CmdLine,&quot;-&quot;, &quot;&quot;),
<a name="157"/>  157:          os:unsetenv(&quot;ERL_FLAGS&quot;)
<a name="158"/>  158:      end || CmdLine &lt;- ErlSingle],
<a name="159"/>  159: 
<a name="160"/>  160:     EmuSingle = [&quot;a&quot;, &quot;A&quot;, &quot;C&quot;, &quot;e&quot;, &quot;i&quot;, &quot;n&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;t&quot;,
<a name="161"/>  161:                  &quot;T&quot;, &quot;R&quot;, &quot;W&quot;, &quot;K&quot;, &quot;IOt&quot;, &quot;IOp&quot;, &quot;IOPt&quot;, &quot;IOPp&quot;,
<a name="162"/>  162:                  &quot;J&quot;, &quot;SP&quot;, &quot;SDcpu&quot;, &quot;SDPcpu&quot;, &quot;SDio&quot;,
<a name="163"/>  163:                  &quot;hms&quot;, &quot;rg&quot;, &quot;sbt&quot;, &quot;zdbbl&quot;],
<a name="164"/>  164: 
<a name="165"/>  165:     [begin
<a name="166"/>  166:          MissingCheck(CmdLine,&quot;+&quot;,&quot;&quot;),
<a name="167"/>  167: 
<a name="168"/>  168:          %% We test what happens when ERL_FLAGS is set
<a name="169"/>  169:          os:putenv(&quot;ERL_FLAGS&quot;,&quot;-test&quot;),
<a name="170"/>  170:          MissingCheck(CmdLine,&quot;+&quot;, &quot;&quot;),
<a name="171"/>  171:          os:unsetenv(&quot;ERL_FLAGS&quot;)
<a name="172"/>  172:      end || CmdLine &lt;- EmuSingle],
<a name="173"/>  173: 
<a name="174"/>  174:     ErlDouble = [&quot;env&quot;],
<a name="175"/>  175:     
<a name="176"/>  176:     [begin
<a name="177"/>  177:          MissingCheck(CmdLine,&quot;-&quot;,&quot;&quot;),
<a name="178"/>  178:          MissingCheck(CmdLine,&quot;-&quot;,&quot; a&quot;),
<a name="179"/>  179: 
<a name="180"/>  180:          %% We test what happens when ERL_FLAGS is set
<a name="181"/>  181:          os:putenv(&quot;ERL_FLAGS&quot;,&quot;-test&quot;),
<a name="182"/>  182:          MissingCheck(CmdLine,&quot;-&quot;, &quot;&quot;),
<a name="183"/>  183:          MissingCheck(CmdLine,&quot;-&quot;, &quot; a&quot;),
<a name="184"/>  184:          os:unsetenv(&quot;ERL_FLAGS&quot;)
<a name="185"/>  185:      end || CmdLine &lt;- ErlDouble],
<a name="argument_with_option-last_expr"/><a name="186"/>  186:     ok.
<a name="187"/>  187: 
<a name="args_file-1"/><a name="188"/>  188: <b>args_file</b>(Config) when is_list(Config) -&gt;
<a name="189"/>  189:     AFN1 = privfile(&quot;1&quot;, Config),
<a name="190"/>  190:     AFN2 = privfile(&quot;2&quot;, Config),
<a name="191"/>  191:     AFN3 = privfile(&quot;3&quot;, Config),
<a name="192"/>  192:     AFN4 = privfile(&quot;4&quot;, Config),
<a name="193"/>  193:     AFN5 = privfile(&quot;5&quot;, Config),
<a name="194"/>  194:     AFN6 = privfile(&quot;6&quot;, Config),
<a name="195"/>  195:     write_file(AFN1, &quot;-MiscArg2~n&quot;
<a name="196"/>  196: 		     &quot;# a comment +\\#1000~n&quot;
<a name="197"/>  197: 		     &quot;+\\#200 # another comment~n&quot;
<a name="198"/>  198: 		     &quot;~n&quot;
<a name="199"/>  199: 		     &quot;# another config file to read~n&quot;
<a name="200"/>  200: 		     &quot; -args_file ~s#acomment~n&quot;
<a name="201"/>  201: 		     &quot;~n&quot;
<a name="202"/>  202: 		     &quot;-MiscArg7~n&quot;
<a name="203"/>  203: 		     &quot;-MiscArg8 'val  with  double   space'~n&quot;
<a name="204"/>  204: 		     &quot;-MiscArg9 '~n'~n&quot;
<a name="205"/>  205: 		     &quot;-MiscArg10 \\~n\\\t~n&quot;
<a name="206"/>  206: 		     &quot;#~n&quot;
<a name="207"/>  207: 		     &quot;+\\#700~n&quot;
<a name="208"/>  208:                      &quot;#~s~n&quot;
<a name="209"/>  209: 		     &quot;-extra +XtraArg6~n&quot;,
<a name="210"/>  210: 	       [AFN2,lists:duplicate(1024*1024, $a)]),
<a name="211"/>  211:     write_file(AFN2,
<a name="212"/>  212: 		     &quot;-MiscArg3 \t\v\f\r\n   ~n&quot;
<a name="213"/>  213: 		     &quot;+\\#300~n&quot;
<a name="214"/>  214: 		     &quot;-args_file ~s~n&quot;
<a name="215"/>  215: 		     &quot;-MiscArg5 ' '~n&quot;
<a name="216"/>  216: 		     &quot;+\\#500#anothercomment -MiscArg11~n&quot;
<a name="217"/>  217: 		     &quot;-args_file ~s~n&quot;
<a name="218"/>  218: 		     &quot;-args_file ~s~n&quot;
<a name="219"/>  219: 		     &quot;-args_file ~s~n&quot;
<a name="220"/>  220:                      &quot;# ~s~n&quot;
<a name="221"/>  221: 		     &quot;-extra +XtraArg5~n&quot;,
<a name="222"/>  222: 		     [AFN3, AFN4, AFN5, AFN6,lists:duplicate(1758, $a)]),
<a name="223"/>  223:     write_file(AFN3,
<a name="224"/>  224: 		     &quot;# comment again~n&quot;
<a name="225"/>  225: 		     &quot; -MiscArg4 +\\#400 -extra +XtraArg1&quot;),
<a name="226"/>  226:     write_file(AFN4,
<a name="227"/>  227: 		     &quot; -MiscArg6 +\\#600 -extra +XtraArg2~n&quot;
<a name="228"/>  228: 		     &quot;+XtraArg3~n&quot;
<a name="229"/>  229: 		     &quot;+XtraArg4~n&quot;
<a name="230"/>  230: 		     &quot;# comment again~n&quot;),
<a name="231"/>  231:     write_file(AFN5, &quot;&quot;),
<a name="232"/>  232:     write_file(AFN6, &quot;-extra # +XtraArg10~n&quot;),
<a name="233"/>  233:     CmdLine = &quot;+#100 -MiscArg1 &quot;
<a name="234"/>  234: 	++ &quot;-args_file &quot; ++ AFN1
<a name="235"/>  235: 	++ &quot; +#800 -MiscArgCLI \\\t -extra +XtraArg7 +XtraArg8&quot;,
<a name="236"/>  236:     {Emu, Misc, Extra} = emu_args(CmdLine),
<a name="237"/>  237:     verify_args([&quot;-#100&quot;, &quot;-#200&quot;, &quot;-#300&quot;, &quot;-#400&quot;,
<a name="238"/>  238: 		       &quot;-#500&quot;, &quot;-#600&quot;, &quot;-#700&quot;, &quot;-#800&quot;], Emu),
<a name="239"/>  239:     verify_args([&quot;-MiscArg1&quot;, &quot;-MiscArg2&quot;, &quot;-MiscArg3&quot;, &quot;-MiscArg4&quot;,
<a name="240"/>  240:                  &quot;-MiscArg5&quot;, &quot; &quot;, &quot;-MiscArg6&quot;, &quot;-MiscArg7&quot;, &quot;-MiscArg8&quot;,
<a name="241"/>  241:                  &quot;val  with  double   space&quot;,
<a name="242"/>  242:                  &quot;-MiscArg9&quot;,&quot;\n&quot;,&quot;-MiscArg10&quot;,&quot;\n\t&quot;,&quot;-MiscArgCLI&quot;],
<a name="243"/>  243: 		      Misc),
<a name="244"/>  244:     verify_args([&quot;+XtraArg1&quot;, &quot;+XtraArg2&quot;, &quot;+XtraArg3&quot;, &quot;+XtraArg4&quot;,
<a name="245"/>  245: 		       &quot;+XtraArg5&quot;, &quot;+XtraArg6&quot;, &quot;+XtraArg7&quot;, &quot;+XtraArg8&quot;],
<a name="246"/>  246: 		      Extra),
<a name="247"/>  247:     verify_not_args([&quot;&quot;,&quot;-MiscArg11&quot;, &quot;-#1000&quot;, &quot;+XtraArg10&quot;,
<a name="248"/>  248: 			   &quot;-MiscArg1&quot;, &quot;-MiscArg2&quot;, &quot;-MiscArg3&quot;, &quot;-MiscArg4&quot;,
<a name="249"/>  249: 			   &quot;-MiscArg5&quot;, &quot;-MiscArg6&quot;, &quot;-MiscArg7&quot;, &quot;-MiscArg8&quot;,
<a name="250"/>  250:                            &quot;-MiscArg9&quot;, &quot;-MiscArg10&quot;,&quot;-MiscArgCLI&quot;,
<a name="251"/>  251: 			   &quot;+XtraArg1&quot;, &quot;+XtraArg2&quot;, &quot;+XtraArg3&quot;, &quot;+XtraArg4&quot;,
<a name="252"/>  252: 			   &quot;+XtraArg5&quot;, &quot;+XtraArg6&quot;, &quot;+XtraArg7&quot;, &quot;+XtraArg8&quot;],
<a name="253"/>  253: 			  Emu),
<a name="254"/>  254:     verify_not_args([&quot;&quot;,&quot;-MiscArg11&quot;, &quot;-#1000&quot;, &quot;+XtraArg10&quot;,
<a name="255"/>  255: 			   &quot;-#100&quot;, &quot;-#200&quot;, &quot;-#300&quot;, &quot;-#400&quot;,
<a name="256"/>  256: 			   &quot;-#500&quot;, &quot;-#600&quot;, &quot;-#700&quot;, &quot;-#800&quot;,
<a name="257"/>  257: 			   &quot;+XtraArg1&quot;, &quot;+XtraArg2&quot;, &quot;+XtraArg3&quot;, &quot;+XtraArg4&quot;,
<a name="258"/>  258: 			   &quot;+XtraArg5&quot;, &quot;+XtraArg6&quot;, &quot;+XtraArg7&quot;, &quot;+XtraArg8&quot;],
<a name="259"/>  259: 			  Misc),
<a name="260"/>  260:     verify_not_args([&quot;&quot;,&quot;-MiscArg11&quot;, &quot;-#1000&quot;, &quot;+XtraArg10&quot;,
<a name="261"/>  261: 			   &quot;-#100&quot;, &quot;-#200&quot;, &quot;-#300&quot;, &quot;-#400&quot;,
<a name="262"/>  262: 			   &quot;-#500&quot;, &quot;-#600&quot;, &quot;-#700&quot;, &quot;-#800&quot;,
<a name="263"/>  263: 			   &quot;-MiscArg1&quot;, &quot;-MiscArg2&quot;, &quot;-MiscArg3&quot;, &quot;-MiscArg4&quot;,
<a name="264"/>  264: 			   &quot;-MiscArg5&quot;, &quot;-MiscArg6&quot;, &quot;-MiscArg7&quot;, &quot;-MiscArg8&quot;,
<a name="265"/>  265:                            &quot;-MiscArg9&quot;,&quot;-MiscArg10&quot;,&quot;-MiscArgCLI&quot;],
<a name="266"/>  266: 			  Extra),
<a name="args_file-last_expr"/><a name="267"/>  267:     ok.
<a name="268"/>  268: 
<a name="evil_args_file-1"/><a name="269"/>  269: <b>evil_args_file</b>(Config) when is_list(Config) -&gt;
<a name="270"/>  270:     Lim = 300,
<a name="271"/>  271:     FNums = lists:seq(1, Lim),
<a name="272"/>  272:     lists:foreach(fun (End) when End == Lim -&gt;
<a name="273"/>  273: 			  AFN = privfile(integer_to_list(End), Config),
<a name="274"/>  274: 			  write_file(AFN,
<a name="275"/>  275: 					   &quot;-MiscArg~p &quot;,
<a name="276"/>  276: 					   [End]);
<a name="277"/>  277: 		      (I) -&gt;
<a name="278"/>  278: 			  AFNX = privfile(integer_to_list(I), Config),
<a name="279"/>  279: 			  AFNY = privfile(integer_to_list(I+1), Config),
<a name="280"/>  280: 			  {Frmt, Args} =
<a name="281"/>  281: 			      case I rem 2 of
<a name="282"/>  282: 				  0 -&gt;
<a name="283"/>  283: 				      {&quot;-MiscArg~p -args_file ~s -MiscArg~p&quot;,
<a name="284"/>  284: 				       [I, AFNY, I]};
<a name="285"/>  285: 				  _ -&gt;
<a name="286"/>  286: 				      {&quot;-MiscArg~p -args_file ~s&quot;,
<a name="287"/>  287: 				       [I, AFNY]}
<a name="288"/>  288: 			      end,
<a name="289"/>  289: 			  write_file(AFNX, Frmt, Args)
<a name="290"/>  290: 		  end,
<a name="291"/>  291: 		  FNums),
<a name="292"/>  292:     {_Emu, Misc, _Extra} = emu_args(&quot;-args_file &quot;
<a name="293"/>  293: 					  ++ privfile(&quot;1&quot;, Config)),
<a name="294"/>  294:     ANums = FNums
<a name="295"/>  295: 	++ lists:reverse(lists:filter(fun (I) when I == Lim -&gt; false;
<a name="296"/>  296: 					  (I) when I rem 2 == 0 -&gt; true;
<a name="297"/>  297: 					  (_) -&gt; false
<a name="298"/>  298: 				      end, FNums)),
<a name="299"/>  299:     verify_args(lists:map(fun (I) -&gt; &quot;-MiscArg&quot;++integer_to_list(I) end,
<a name="300"/>  300: 				ANums),
<a name="301"/>  301: 		      Misc),
<a name="evil_args_file-last_expr"/><a name="302"/>  302:     ok.
<a name="303"/>  303: 
<a name="missing_args_file-1"/><a name="304"/>  304: <b>missing_args_file</b>(Config) when is_list(Config) -&gt;
<a name="305"/>  305:     % supply an unexisting args file as parameter
<a name="306"/>  306:     CmdLine = &quot;-args_file &quot;++ &quot;missing_vm_args_file&quot;,
<a name="307"/>  307:     % we're expecting a failure, capture the output
<a name="308"/>  308:     % and check for the correct error message
<a name="309"/>  309:     Output = emu_args(CmdLine, [return_output]),
<a name="310"/>  310:     % the output message format in case of failure can be consulted
<a name="311"/>  311:     % at read_args_file@erts/etc/common/erlexec.c
<a name="missing_args_file-last_expr"/><a name="312"/>  312: <b>    case re:run</b>(Output, &quot;Failed to open arguments file [^ ]+ at [^ ]+: No such file or directory.*&quot;) of
<a name="313"/>  313:         {match,[{0, MatchEnd}]} when MatchEnd &gt; 0 -&gt;
<a name="314"/>  314:             % a simple match on the regex is sufficient to decide
<a name="315"/>  315:             % that the output is properly formatted
<a name="316"/>  316:             ok;
<a name="317"/>  317:         Error -&gt;
<a name="318"/>  318:             exit({unexpected_args_output, Output, Error})
<a name="319"/>  319:     end.
<a name="320"/>  320: 
<a name="env-1"/><a name="321"/>  321: <b>env</b>(Config) when is_list(Config) -&gt;
<a name="322"/>  322:     os:putenv(&quot;ERL_AFLAGS&quot;, &quot;-MiscArg1 +#100 -extra +XtraArg1 +XtraArg2&quot;),
<a name="323"/>  323:     CmdLine = &quot;+#200 -MiscArg2 -extra +XtraArg3 +XtraArg4&quot;,
<a name="324"/>  324:     os:putenv(&quot;ERL_FLAGS&quot;, &quot;-MiscArg3 +#300 -extra +XtraArg5&quot;),
<a name="325"/>  325:     os:putenv(&quot;ERL_ZFLAGS&quot;, &quot;-MiscArg4 +#400 -extra +XtraArg6&quot;),
<a name="326"/>  326:     {Emu, Misc, Extra} = emu_args(CmdLine),
<a name="327"/>  327:     verify_args([&quot;-#100&quot;, &quot;-#200&quot;, &quot;-#300&quot;, &quot;-#400&quot;], Emu),
<a name="328"/>  328:     verify_args([&quot;-MiscArg1&quot;, &quot;-MiscArg2&quot;, &quot;-MiscArg3&quot;, &quot;-MiscArg4&quot;],
<a name="329"/>  329: 		      Misc),
<a name="330"/>  330:     verify_args([&quot;+XtraArg1&quot;, &quot;+XtraArg2&quot;, &quot;+XtraArg3&quot;, &quot;+XtraArg4&quot;,
<a name="331"/>  331: 		       &quot;+XtraArg5&quot;, &quot;+XtraArg6&quot;],
<a name="332"/>  332: 		      Extra),
<a name="env-last_expr"/><a name="333"/>  333:     ok.
<a name="334"/>  334: 
<a name="args_file_env-1"/><a name="335"/>  335: <b>args_file_env</b>(Config) when is_list(Config) -&gt;
<a name="336"/>  336:     AFN1 = privfile(&quot;1&quot;, Config),
<a name="337"/>  337:     AFN2 = privfile(&quot;2&quot;, Config),
<a name="338"/>  338:     write_file(AFN1, &quot;-MiscArg2 +\\#200 -extra +XtraArg1&quot;),
<a name="339"/>  339:     write_file(AFN2, &quot;-MiscArg3 +\\#400 -extra +XtraArg3&quot;),
<a name="340"/>  340:     os:putenv(&quot;ERL_AFLAGS&quot;,
<a name="341"/>  341: 		    &quot;-MiscArg1 +#100 -args_file &quot;++AFN1++ &quot; -extra +XtraArg2&quot;),
<a name="342"/>  342:     CmdLine = &quot;+#300 -args_file &quot;++AFN2++&quot; -MiscArg4 -extra +XtraArg4&quot;,
<a name="343"/>  343:     os:putenv(&quot;ERL_FLAGS&quot;, &quot;-MiscArg5 +#500 -extra +XtraArg5&quot;),
<a name="344"/>  344:     os:putenv(&quot;ERL_ZFLAGS&quot;, &quot;-MiscArg6 +#600 -extra +XtraArg6&quot;),
<a name="345"/>  345:     {Emu, Misc, Extra} = emu_args(CmdLine),
<a name="346"/>  346:     verify_args([&quot;-#100&quot;, &quot;-#200&quot;, &quot;-#300&quot;, &quot;-#400&quot;,
<a name="347"/>  347: 		       &quot;-#500&quot;, &quot;-#600&quot;], Emu),
<a name="348"/>  348:     verify_args([&quot;-MiscArg1&quot;, &quot;-MiscArg2&quot;, &quot;-MiscArg3&quot;, &quot;-MiscArg4&quot;,
<a name="349"/>  349: 		       &quot;-MiscArg5&quot;, &quot;-MiscArg6&quot;],
<a name="350"/>  350: 		      Misc),
<a name="351"/>  351:     verify_args([&quot;+XtraArg1&quot;, &quot;+XtraArg2&quot;, &quot;+XtraArg3&quot;, &quot;+XtraArg4&quot;,
<a name="352"/>  352: 		       &quot;+XtraArg5&quot;, &quot;+XtraArg6&quot;],
<a name="353"/>  353: 		      Extra),
<a name="args_file_env-last_expr"/><a name="354"/>  354:     ok.
<a name="355"/>  355: 
<a name="356"/>  356: <i>%% Make sure &quot;erl -detached&quot; survives when parent process group gets killed</i>
<a name="otp_7461-1"/><a name="357"/>  357: <b>otp_7461</b>(Config) when is_list(Config) -&gt;   
<a name="otp_7461-last_expr"/><a name="358"/>  358: <b>    case os:type</b>() of
<a name="359"/>  359:     	{unix,_} -&gt;
<a name="360"/>  360: 	    {NetStarted, _} = net_kernel:start([test_server, shortnames]),
<a name="361"/>  361: 	    try
<a name="362"/>  362: 		net_kernel:monitor_nodes(true),
<a name="363"/>  363: 		register(otp_7461, self()),	    
<a name="364"/>  364: 
<a name="365"/>  365: 		otp_7461_do(Config)		
<a name="366"/>  366: 	    after 
<a name="367"/>  367: 		catch unregister(otp_7461),
<a name="368"/>  368: 	        catch net_kernel:monitor_nodes(false),
<a name="369"/>  369: 	        case NetStarted of
<a name="370"/>  370: 		    ok -&gt; net_kernel:stop();
<a name="371"/>  371: 		    _ -&gt; ok
<a name="372"/>  372: 		end
<a name="373"/>  373: 	    end;
<a name="374"/>  374: 	_ -&gt;
<a name="375"/>  375: 	    {skip,&quot;Only on Unix.&quot;}
<a name="376"/>  376:     end.
<a name="377"/>  377: 	
<a name="otp_7461_do-1"/><a name="378"/>  378: <b>otp_7461_do</b>(Config) -&gt;
<a name="379"/>  379:     io:format(&quot;alive=~p node=~p\n&quot;,[is_alive(), node()]),
<a name="380"/>  380:     TestProg = filename:join([proplists:get_value(data_dir, Config), &quot;erlexec_tests&quot;]),
<a name="381"/>  381:     {ok, [[ErlProg]]} = init:get_argument(progname),
<a name="382"/>  382:     Cmd = TestProg ++ &quot; &quot; ++ ErlProg ++
<a name="383"/>  383: 	&quot; -detached -sname &quot; ++ get_nodename(otp_7461) ++
<a name="384"/>  384: 	&quot; -setcookie &quot; ++ atom_to_list(erlang:get_cookie()) ++
<a name="385"/>  385: 	&quot; -pa &quot; ++ filename:dirname(code:which(?MODULE)) ++
<a name="386"/>  386: 	&quot; -s erlexec_SUITE otp_7461_remote init &quot; ++ atom_to_list(node()),
<a name="387"/>  387:     
<a name="388"/>  388:     %% otp_7461 --------&gt; erlexec_tests.c --------&gt; cerl -detached
<a name="389"/>  389:     %%          open_port                 fork+exec
<a name="390"/>  390:     
<a name="391"/>  391:     io:format(&quot;spawn port prog ~p\n&quot;,[Cmd]),
<a name="392"/>  392:     Port = open_port({spawn, Cmd}, [eof]),
<a name="393"/>  393:     
<a name="394"/>  394:     io:format(&quot;Wait for node to connect...\n&quot;,[]),    
<a name="395"/>  395:     {nodeup, Slave} = receive Msg -&gt; Msg
<a name="396"/>  396: 			    after 20*1000 -&gt; timeout end,
<a name="397"/>  397:     io:format(&quot;Node alive: ~p\n&quot;, [Slave]),
<a name="398"/>  398:     
<a name="399"/>  399:     pong = net_adm:ping(Slave),
<a name="400"/>  400:     io:format(&quot;Ping ok towards ~p\n&quot;, [Slave]),
<a name="401"/>  401:     
<a name="402"/>  402:     Port ! { self(), {command, &quot;K&quot;}}, % Kill child process group
<a name="403"/>  403:     {Port, {data, &quot;K&quot;}} = receive Msg2 -&gt; Msg2 end,
<a name="404"/>  404:     port_close(Port),
<a name="405"/>  405:     
<a name="406"/>  406:     %% Now the actual test. Detached node should still be alive.
<a name="407"/>  407:     pong = net_adm:ping(Slave),
<a name="408"/>  408:     io:format(&quot;Ping still ok towards ~p\n&quot;, [Slave]),
<a name="409"/>  409:     
<a name="410"/>  410:     %% Halt node
<a name="411"/>  411:     rpc:cast(Slave, ?MODULE, otp_7461_remote, [[halt, self()]]),
<a name="412"/>  412:     
<a name="413"/>  413:     {nodedown, Slave} = receive
<a name="414"/>  414:                             Msg3 -&gt; Msg3
<a name="415"/>  415:                         after 20*1000 -&gt; timeout
<a name="416"/>  416:                         end,
<a name="417"/>  417:     io:format(&quot;Node dead: ~p\n&quot;, [Slave]),
<a name="otp_7461_do-last_expr"/><a name="418"/>  418:     ok.
<a name="419"/>  419: 
<a name="420"/>  420:       	    
<a name="421"/>  421: <i>%% Executed on slave node</i>
<a name="otp_7461_remote-1"/><a name="422"/>  422: <b>otp_7461_remote</b>([init, Master]) -&gt;
<a name="423"/>  423:     io:format(&quot;otp_7461_remote(init,~p) at ~p\n&quot;,[Master, node()]),
<a name="424"/>  424:     net_kernel:connect_node(Master);
<a name="425"/>  425: <b>otp_7461_remote</b>([halt, Pid]) -&gt;
<a name="426"/>  426:     io:format(&quot;halt order from ~p to node ~p\n&quot;,[Pid,node()]),
<a name="otp_7461_remote-last_expr"/><a name="427"/>  427: <b>    halt</b>().
<a name="428"/>  428: 
<a name="429"/>  429: <i>%% Check +zdbbl flag</i>
<a name="zdbbl_dist_buf_busy_limit-1"/><a name="430"/>  430: <b>zdbbl_dist_buf_busy_limit</b>(Config) when is_list(Config) -&gt;
<a name="431"/>  431:     LimKB = 1122233,
<a name="432"/>  432:     LimB = LimKB*1024,
<a name="433"/>  433:     {ok,[[PName]]} = init:get_argument(progname),
<a name="434"/>  434:     SNameS = &quot;erlexec_test_02&quot;,
<a name="435"/>  435:     SName = list_to_atom(SNameS++&quot;@&quot;++
<a name="436"/>  436:                          hd(tl(string:lexemes(atom_to_list(node()),&quot;@&quot;)))),
<a name="437"/>  437:     Cmd = PName ++ &quot; -sname &quot;++SNameS++&quot; -setcookie &quot;++
<a name="438"/>  438:         atom_to_list(erlang:get_cookie()) ++
<a name="439"/>  439: 	&quot; +zdbbl &quot; ++ integer_to_list(LimKB),
<a name="440"/>  440:     open_port({spawn,Cmd},[]),
<a name="441"/>  441:     pong = loop_ping(SName,40),
<a name="442"/>  442:     LimB = rpc:call(SName,erlang,system_info,[dist_buf_busy_limit]),
<a name="443"/>  443:     ok = cleanup_node(SNameS, 10),
<a name="zdbbl_dist_buf_busy_limit-last_expr"/><a name="444"/>  444:     ok.
<a name="445"/>  445:     
<a name="446"/>  446: 
<a name="447"/>  447: <i>%%</i>
<a name="448"/>  448: <i>%% Utils</i>
<a name="449"/>  449: <i>%%</i>
<a name="450"/>  450: 
<a name="save_env-0"/><a name="451"/>  451: <b>save_env</b>() -&gt;
<a name="save_env-last_expr"/><a name="452"/>  452:     {erl_flags,
<a name="453"/>  453:      os:getenv(&quot;ERL_AFLAGS&quot;),
<a name="454"/>  454:      os:getenv(&quot;ERL_FLAGS&quot;),
<a name="455"/>  455:      os:getenv(&quot;ERL_&quot;++erlang:system_info(otp_release)++&quot;_FLAGS&quot;),
<a name="456"/>  456:      os:getenv(&quot;ERL_ZFLAGS&quot;)}.
<a name="457"/>  457: 
<a name="restore_env-2"/><a name="458"/>  458: <b>restore_env</b>(EVar, false) when is_list(EVar) -&gt;
<a name="459"/>  459:     restore_env(EVar, &quot;&quot;);
<a name="460"/>  460: <b>restore_env</b>(EVar, &quot;&quot;) when is_list(EVar) -&gt;
<a name="461"/>  461:     case os:getenv(EVar) of
<a name="462"/>  462: 	false -&gt; ok;
<a name="463"/>  463: 	&quot;&quot; -&gt; ok;
<a name="464"/>  464: 	&quot; &quot; -&gt; ok;
<a name="465"/>  465: 	_ -&gt; os:putenv(EVar, &quot; &quot;)
<a name="466"/>  466:     end;
<a name="467"/>  467: <b>restore_env</b>(EVar, Value) when is_list(EVar), is_list(Value) -&gt;
<a name="restore_env-last_expr"/><a name="468"/>  468: <b>    case os:getenv</b>(EVar) of
<a name="469"/>  469: 	Value -&gt; ok;
<a name="470"/>  470: 	_ -&gt; os:putenv(EVar, Value)
<a name="471"/>  471:     end.
<a name="472"/>  472: 
<a name="restore_env-1"/><a name="473"/>  473: <b>restore_env</b>({erl_flags, AFlgs, Flgs, RFlgs, ZFlgs}) -&gt;
<a name="474"/>  474:     restore_env(&quot;ERL_AFLAGS&quot;, AFlgs),
<a name="475"/>  475:     restore_env(&quot;ERL_FLAGS&quot;, Flgs),
<a name="476"/>  476:     restore_env(&quot;ERL_&quot;++erlang:system_info(otp_release)++&quot;_FLAGS&quot;, RFlgs),
<a name="477"/>  477:     restore_env(&quot;ERL_ZFLAGS&quot;, ZFlgs),
<a name="restore_env-last_expr"/><a name="478"/>  478:     ok.
<a name="479"/>  479: 
<a name="privfile-2"/><a name="480"/>  480: <b>privfile</b>(Name, Config) -&gt;
<a name="privfile-last_expr"/><a name="481"/>  481: <b>    filename:join</b>([proplists:get_value(priv_dir, Config),
<a name="482"/>  482: 		   atom_to_list(proplists:get_value(testcase, Config)) ++ &quot;.&quot; ++ Name]).
<a name="483"/>  483: 
<a name="write_file-2"/><a name="484"/>  484: <b>write_file</b>(FileName, Frmt) -&gt;
<a name="write_file-last_expr"/><a name="485"/>  485: <b>    write_file</b>(FileName, Frmt, []).
<a name="486"/>  486: 
<a name="write_file-3"/><a name="487"/>  487: <b>write_file</b>(FileName, Frmt, Args) -&gt;
<a name="488"/>  488:     {ok, File} = file:open(FileName, [write]),
<a name="489"/>  489:     io:format(File, Frmt, Args),
<a name="write_file-last_expr"/><a name="490"/>  490: <b>    ok = file:close</b>(File).
<a name="491"/>  491: 
<a name="verify_args-2"/><a name="492"/>  492: <b>verify_args</b>([], _Ys) -&gt;
<a name="493"/>  493:     ok;
<a name="494"/>  494: <b>verify_args</b>(Xs, []) -&gt;
<a name="495"/>  495:     exit({args_not_found_in_order, Xs});
<a name="496"/>  496: <b>verify_args</b>([X|Xs], [Y|Ys]) -&gt;
<a name="verify_args-last_expr"/><a name="497"/>  497: <b>    case string:equal</b>(string:replace(X,&quot;\r\n&quot;,&quot;\n&quot;),string:replace(Y,&quot;\r\n&quot;,&quot;\n&quot;)) of
<a name="498"/>  498:         true -&gt;
<a name="499"/>  499:             verify_args(Xs,Ys);
<a name="500"/>  500:         false -&gt;
<a name="501"/>  501:             verify_args(Xs,[Y|Ys])
<a name="502"/>  502:     end.
<a name="503"/>  503: 
<a name="verify_not_args-2"/><a name="504"/>  504: <b>verify_not_args</b>(Xs, Ys) -&gt;
<a name="verify_not_args-last_expr"/><a name="505"/>  505: <b>    lists:foreach</b>(fun (X) -&gt;
<a name="506"/>  506: 			  case lists:member(X, Ys) of
<a name="507"/>  507: 			      true -&gt; exit({arg_present, X});
<a name="508"/>  508: 			      false -&gt; ok
<a name="509"/>  509: 			  end
<a name="510"/>  510: 		  end, Xs).
<a name="511"/>  511: 
<a name="emu_args-1"/><a name="512"/>  512: <b>emu_args</b>(CmdLineArgs) -&gt;
<a name="emu_args-last_expr"/><a name="513"/>  513: <b>    emu_args</b>(CmdLineArgs, []).
<a name="514"/>  514: 
<a name="emu_args-2"/><a name="515"/>  515: <b>emu_args</b>(CmdLineArgs, Opts) -&gt;
<a name="516"/>  516:     io:format(&quot;CmdLineArgs = ~ts, Opts = ~p~n&quot;, [CmdLineArgs, Opts]),
<a name="517"/>  517:     {ok,[[Erl]]} = init:get_argument(progname),
<a name="518"/>  518:     EmuCL = os:cmd(Erl ++ &quot; -emu_qouted_cmd_exit &quot; ++ CmdLineArgs),
<a name="519"/>  519: <i>%    ct:pal(&quot;EmuCL = ~ts&quot;, [EmuCL]),</i>
<a name="emu_args-last_expr"/><a name="520"/>  520: <b>    case lists:member</b>(return_output, Opts) of
<a name="521"/>  521:         true -&gt;
<a name="522"/>  522:             EmuCL;
<a name="523"/>  523:         false -&gt;
<a name="524"/>  524:             split_emu_clt(string:split(string:trim(EmuCL,both,&quot;\n \&quot;&quot;), &quot;\&quot; \&quot;&quot;, all))
<a name="525"/>  525:     end.
<a name="526"/>  526: 
<a name="split_emu_clt-1"/><a name="527"/>  527: <b>split_emu_clt</b>(EmuCLT) -&gt;
<a name="split_emu_clt-last_expr"/><a name="528"/>  528: <b>    split_emu_clt</b>(EmuCLT, [], [], [], emu).
<a name="529"/>  529: 
<a name="split_emu_clt-5"/><a name="530"/>  530: <b>split_emu_clt</b>([], _Emu, _Misc, _Extra, emu) -&gt;
<a name="531"/>  531:     exit(bad_cmd_line);
<a name="532"/>  532: <b>split_emu_clt</b>([], Emu, Misc, Extra, _Type) -&gt;
<a name="533"/>  533:     {lists:reverse(Emu), lists:reverse(Misc), lists:reverse(Extra)};
<a name="534"/>  534: 
<a name="535"/>  535: <b>split_emu_clt</b>([&quot;--&quot;|As], Emu, Misc, Extra, emu) -&gt;
<a name="536"/>  536:     split_emu_clt(As, Emu, Misc, Extra, misc);
<a name="537"/>  537: <b>split_emu_clt</b>([A|As], Emu, Misc, Extra, emu = Type) -&gt;
<a name="538"/>  538:     split_emu_clt(As, [A|Emu], Misc, Extra, Type);
<a name="539"/>  539: 
<a name="540"/>  540: <b>split_emu_clt</b>([&quot;-extra&quot;|As], Emu, Misc, Extra, misc) -&gt;
<a name="541"/>  541:     split_emu_clt(As, Emu, Misc, Extra, extra);
<a name="542"/>  542: <b>split_emu_clt</b>([A|As], Emu, Misc, Extra, misc = Type) -&gt;
<a name="543"/>  543:     split_emu_clt(As, Emu, [A|Misc], Extra, Type);
<a name="544"/>  544: 
<a name="545"/>  545: <b>split_emu_clt</b>([A|As], Emu, Misc, Extra, extra = Type) -&gt;
<a name="split_emu_clt-last_expr"/><a name="546"/>  546: <b>    split_emu_clt</b>(As, Emu, Misc, [A|Extra], Type).
<a name="547"/>  547:     
<a name="548"/>  548: 
<a name="get_nodename-1"/><a name="549"/>  549: <b>get_nodename</b>(T) -&gt;
<a name="550"/>  550:     atom_to_list(T)
<a name="get_nodename-last_expr"/><a name="551"/>  551: 	++ &quot;-&quot;
<a name="552"/>  552: 	++ atom_to_list(?MODULE)
<a name="553"/>  553: 	++ &quot;-&quot;
<a name="554"/>  554: 	++ integer_to_list(erlang:system_time(seconds))
<a name="555"/>  555: 	++ &quot;-&quot;
<a name="556"/>  556: 	++ integer_to_list(erlang:unique_integer([positive])).
</pre>
</body>
</html>
